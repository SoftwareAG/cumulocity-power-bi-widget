<div class="viewport-modal">
    <div class="modal-header dialog-header">
      <i [c8yIcon]="'graph-report'"></i>
      <h4>
        {{'Select report' | translate}}
      </h4>
    </div>
    <div class="p-16 text-center separator-bottom">
      <p class="lead m-0">{{'Select the workspace you want to access.' | translate }}</p>
      <p class="lead m-0">{{'Select a report from the selected workspace.' | translate }}</p>
    </div>
    <div class="modal-inner-scroll">
      <div class="modal-body">
        <form [formGroup]="form">
          <c8y-form-group>
            <label for="workspace">
              {{'Workspace' | translate}}
            </label>
            <div class="c8y-select-wrapper">
              <select formControlName="workspace"
                      name="workspace"
                      id="workspace">
                <option *ngFor="let workspace of workspaces"
                        [ngValue]="workspace">
                  {{ workspace.name }}
                </option>
              </select>
            </div>
          </c8y-form-group>
          <c8y-form-group>
            <label for="report">
              {{'Report' | translate }}
            </label>
            <div *ngIf="visibleReports?.length === 0 || error || isLoading; else reportsSelect">
              <c8y-loading *ngIf="isLoading"></c8y-loading>
              <em *ngIf="!error && !isLoading; else errorMessage"
                  translate> No reports available for chosen workspace</em>
              <ng-template #errorMessage>
                <div *ngIf="error && !isLoading">
                  <i [c8yIcon]="'warning'"
                     class="m-r-4 text-danger"></i>
                  <em>{{ error }}</em>
                </div>
              </ng-template>
            </div>
            <ng-template #reportsSelect>
              <div class="c8y-select-wrapper">
                <select formControlName="report"
                        name="report"
                        id="report">
                  <option *ngFor="let report of visibleReports"
                          [ngValue]="report">
                    {{ report.name }}
                  </option>
                </select>
              </div>
            </ng-template>
          </c8y-form-group>
        </form>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-default"
              (click)="close()">{{ 'Cancel' | translate }}</button>
      <button [ngClass]="{'btn-pending': isLoading}"
              class="btn btn-primary"
              (click)="save()"
              [disabled]="form.invalid">
        {{'Select' | translate }}
      </button>
    </div>
  </div>